{% extends "base.html" %}

{% block title %}Register - AWS Quiz Platform{% endblock %}

{% block content %}
<div class="auth-container" style="min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 2rem;">
    <div class="auth-card" style="background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.3); border-radius: 32px; padding: 3rem; max-width: 520px; width: 100%; min-width: 450px; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); position: relative; margin: 0 auto;">
    <div class="auth-header" style="text-align: center; margin-bottom: 2rem;">
        <div class="auth-logo" style="margin-bottom: 1rem;">
            <img src="{{ url_for('static', filename='img/idexcel-AssessIQ.png') }}" alt="Idexcel AssessIQ" style="height: 80px; width: auto;">
        </div>
        <p class="auth-subtitle" style="color: var(--gray-medium); font-size: 1rem; margin: 0;">Join AssessIQ Platform to start practicing</p>
    </div>

    <form method="POST" action="{{ url_for('register') }}" id="registerForm">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
            <div class="form-group">
                <label for="first_name" class="form-label">First Name</label>
                <input 
                    type="text" 
                    id="first_name" 
                    name="first_name" 
                    class="form-input" 
                    placeholder="First name" 
                    required
                    autocomplete="given-name"
                    value="{{ request.form.get('first_name', '') }}"
                >
            </div>

            <div class="form-group">
                <label for="last_name" class="form-label">Last Name</label>
                <input 
                    type="text" 
                    id="last_name" 
                    name="last_name" 
                    class="form-input" 
                    placeholder="Last name" 
                    required
                    autocomplete="family-name"
                    value="{{ request.form.get('last_name', '') }}"
                >
            </div>
        </div>

        <div class="form-group">
            <label for="username" class="form-label">Username</label>
            <input 
                type="text" 
                id="username" 
                name="username" 
                class="form-input" 
                placeholder="Choose a username" 
                required
                autocomplete="username"
                value="{{ request.form.get('username', '') }}"
                pattern="[a-zA-Z0-9_]{3,20}"
                title="Username must be 3-20 characters long and contain only letters, numbers, and underscores"
            >
        </div>

        <div class="form-group">
            <label for="email" class="form-label">Email</label>
            <input 
                type="email" 
                id="email" 
                name="email" 
                class="form-input" 
                placeholder="your.name@idexcel.com" 
                required
                autocomplete="email"
                value="{{ request.form.get('email', '') }}"
            >
            <p style="color: #6b7280; font-size: 0.75rem; margin-top: 0.375rem; display: flex; align-items: center; gap: 0.25rem;">
                <svg style="width: 12px; height: 12px; fill: #3b82f6;" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
                </svg>
                Please use your Idexcel email address (@idexcel.com)
            </p>
        </div>

        <div class="form-group">
            <label for="password" class="form-label">Password</label>
            <input 
                type="password" 
                id="password" 
                name="password" 
                class="form-input" 
                placeholder="Create a password" 
                required
                autocomplete="new-password"
                minlength="6"
            >
            <small style="color: var(--gray-medium); font-size: 0.8rem;">
                Password must be at least 6 characters long
            </small>
        </div>

        <div class="form-group">
            <label for="confirm_password" class="form-label">Confirm Password</label>
            <input 
                type="password" 
                id="confirm_password" 
                name="confirm_password" 
                class="form-input" 
                placeholder="Confirm your password" 
                required
                autocomplete="new-password"
                minlength="6"
            >
        </div>

        <div class="form-group">
            <button type="submit" class="btn btn-primary btn-full">Create Account</button>
        </div>
    </form>

    <div style="margin: 1.5rem 0; text-align: center;">
        <div style="height: 1px; background: #e5e7eb; margin: 1rem 0;"></div>
    </div>
    
    <div style="text-align: center;">
        <p style="color: var(--gray-light); margin-bottom: 1rem;">Already have an account?</p>
        <a href="{{ url_for('login') }}" class="btn-auth btn-secondary-auth" style="display: inline-block; padding: 12px 24px; background: var(--secondary); color: white; text-decoration: none; border-radius: 8px; font-weight: 500;">
            Sign In
        </a>
    </div>
</div>
</div>

<div style="text-align: center; margin-top: 2rem; color: var(--gray-medium);">
    <small>&copy; 2025 AWS Quiz Platform. All Rights Reserved.</small>
</div>
</div>
{% endblock %}

{% block scripts %}
<style>
.logo-container {
    display: flex;
    justify-content: center;
    align-items: center;
    margin-bottom: 1.5rem !important;
}

.logo-container img {
    max-width: 100%;
    height: auto;
}

.card {
    min-width: 450px;
}

@media (max-width: 768px) {
    .card {
        min-width: 300px;
        max-width: 95%;
    }
    
    .logo-container img {
        height: 60px !important;
    }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('registerForm');
    const password = document.getElementById('password');
    const confirmPassword = document.getElementById('confirm_password');

    function validatePassword() {
        if (password.value !== confirmPassword.value) {
            confirmPassword.setCustomValidity("Passwords don't match");
        } else {
            confirmPassword.setCustomValidity('');
        }
    }

    password.addEventListener('input', validatePassword);
    confirmPassword.addEventListener('input', validatePassword);

    // Auto-hide flash messages
    const flashMessages = document.querySelectorAll('.flash-message');
    flashMessages.forEach(function(message) {
        setTimeout(function() {
            message.style.animation = 'slideOut 0.3s ease-out';
            setTimeout(function() {
                message.remove();
            }, 300);
        }, 5000);
    });
});
</script>
{% endblock %}