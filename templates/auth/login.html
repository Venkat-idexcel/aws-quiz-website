{% extends "base.html" %}

{% block title %}Sign In - AssessIQ Professional Platform{% endblock %}

{% block content %}
<div style="min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 10px; background: #f8fafc;">
    <div style="background: white; border-radius: 15px; padding: 25px; width: 100%; max-width: 650px; min-width: 500px; box-shadow: 0 15px 30px rgba(0,0,0,0.1); margin: 0 auto;">
        
        <!-- Header -->
        <div style="text-align: center; margin-bottom: 20px;">
            <img src="{{ url_for('static', filename='img/idexcel-AssessIQ.png') }}" alt="AssessIQ Professional Platform" style="height: 100px; margin-bottom: 10px;">
            <p style="color: #666; font-size: 16px; margin: 0;">Sign in to your professional learning account</p>
        </div>

        <!-- Flash Messages -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div style="padding: 12px 16px; margin-bottom: 20px; border-radius: 8px; 
                                {% if category == 'error' %}background: #fee2e2; color: #dc2626; border: 1px solid #fecaca;
                                {% elif category == 'success' %}background: #d1fae5; color: #059669; border: 1px solid #a7f3d0;
                                {% else %}background: #dbeafe; color: #2563eb; border: 1px solid #bfdbfe;{% endif %}">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        <!-- Login Form -->
        <form method="POST" action="{{ url_for('login') }}" style="margin-bottom: 20px;">
            <div style="margin-bottom: 15px;">
                <div style="position: relative;">
                    <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); font-size: 18px;">📧</span>
                    <input 
                        type="email" 
                        id="email" 
                        name="email" 
                        placeholder="Enter your email"
                        required
                        autocomplete="email"
                        value="{{ request.form.get('email', '') }}"
                        style="width: 100%; padding: 15px 15px 15px 45px; border: 2px solid #e1e5e9; border-radius: 10px; font-size: 16px; outline: none; box-sizing: border-box;"
                        onfocus="this.style.borderColor='#3b82f6'"
                        onblur="this.style.borderColor='#e1e5e9'"
                    >
                </div>
            </div>

            <div style="margin-bottom: 15px;">
                <div style="position: relative;">
                    <span style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); font-size: 18px;">🔒</span>
                    <input 
                        type="password" 
                        id="password" 
                        name="password" 
                        placeholder="Enter your password"
                        required
                        autocomplete="current-password"
                        style="width: 100%; padding: 15px 45px 15px 45px; border: 2px solid #e1e5e9; border-radius: 10px; font-size: 16px; outline: none; box-sizing: border-box;"
                        onfocus="this.style.borderColor='#3b82f6'"
                        onblur="this.style.borderColor='#e1e5e9'"
                    >
                    <button type="button" onclick="togglePassword('password')" style="position: absolute; right: 12px; top: 50%; transform: translateY(-50%); background: none; border: none; font-size: 18px; cursor: pointer;">👁️</button>
                </div>
            </div>

            <button type="submit" style="width: 100%; padding: 15px; background: #3b82f6; color: white; border: none; border-radius: 10px; font-size: 16px; font-weight: bold; cursor: pointer; margin-bottom: 10px; transition: all 0.2s;" onmouseover="this.style.background='#2563eb'; this.style.transform='translateY(-2px)'" onmouseout="this.style.background='#3b82f6'; this.style.transform='translateY(0)'">
                🚀 Sign In
            </button>
            
            <div style="text-align: center;">
                <a href="{{ url_for('forgot_password') }}" style="color: #3b82f6; text-decoration: none; font-size: 14px;">✏️ Forgot your password?</a>
            </div>
        </form>

        <!-- Footer -->
        <div style="text-align: center; padding-top: 15px; border-top: 1px solid #e5e7eb;">
            <p style="color: #6b7280; margin-bottom: 10px;">Don't have an account?</p>
            <a href="{{ url_for('register') }}" style="display: inline-block; padding: 12px 24px; background: #f3f4f6; color: #374151; text-decoration: none; border-radius: 8px; font-weight: 500; transition: background 0.3s;" onmouseover="this.style.backgroundColor='#e5e7eb'" onmouseout="this.style.backgroundColor='#f3f4f6'">
                ✨ Create New Account
            </a>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    function togglePassword(fieldId) {
        const field = document.getElementById(fieldId);
        const button = field.nextElementSibling;
        
        if (field.type === 'password') {
            field.type = 'text';
            button.textContent = '🙈';
        } else {
            field.type = 'password';
            button.textContent = '👁️';
        }
    }

    // Auto-hide flash messages after 5 seconds
    setTimeout(() => {
        const messages = document.querySelectorAll('[style*="padding: 12px 16px"][style*="margin-bottom: 20px"]');
        messages.forEach(msg => {
            msg.style.transition = 'opacity 0.5s';
            msg.style.opacity = '0';
            setTimeout(() => msg.remove(), 500);
        });
    }, 5000);
</script>
{% endblock %}